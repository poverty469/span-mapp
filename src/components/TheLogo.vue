<template>
  <div>
    <a href="https://povertyaction.org" target="_blank">
      <svg
        class="logo"
        :class="{ 'logo--glow': forceLogoGlow }"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="-13.973 -15.393 450 310"
      >
        <g fill="#231F20" class="outside-text">
          <path
            d="M77.8 13.635c-4.396-1.495-7.265-2.36-7.225-5.894 0-3.024 2.395-4.985 5.302-4.985 3.847 0 4.789 2.868 5.145 4.751h3.22C83.769 2.008 79.607.005 75.994.005c-4.436 0-8.716 2.865-8.638 8.011 0 5.497 5.063 6.989 7.422 7.697 3.375 1.098 6.871 2.002 6.871 6.087 0 3.224-2.788 5.539-5.813 5.539-1.807 0-5.34-1.021-5.811-5.854h-3.26c.196 5.538 4.242 8.602 9.112 8.602 5.419 0 8.992-3.769 8.992-8.523.001-5.341-4.317-6.87-7.069-7.929zM93.678.516H90.81v7.933h-4.161v2.316h4.161v18.809h2.868V10.765h4.635V8.449h-4.635zM118.621 12.888c-1.019-2.397-4.122-5.028-8.638-5.028-6.444 0-10.957 4.951-10.957 11.153 0 5.81 4.082 11.149 10.957 11.149 3.77 0 6.987-1.765 8.638-4.943v4.355h2.908V8.449h-2.908v4.439zm-.628 9.423c-1.141 2.982-3.888 5.146-7.617 5.146-5.813 0-8.441-4.595-8.485-8.408v-.036c0-4.71 3.538-8.483 8.405-8.483 3.73 0 6.557 2.16 7.734 5.065a7.547 7.547 0 0 1 .671 3.378c0 1.139-.239 2.316-.708 3.338zM131.712.516h-2.867v7.933h-4.162v2.316h4.162v18.809h2.867V10.765h4.636V8.449h-4.636zM147.854 7.86c-6.321 0-11.112 4.987-11.112 11.189 0 5.265 3.812 11.113 11.155 11.113 2.159 0 4.24-.588 6.008-1.728 1.804-1.14 3.296-2.861 4.28-5.142h-3.025c-1.371 2.747-4.005 4.36-7.263 4.36-3.575.038-8.091-2.512-8.25-7.816h19.247c.313-3.379-.869-6.636-3.303-8.993-2-1.923-4.751-2.983-7.737-2.983zm-8.165 9.662c.276-3.85 3.653-7.189 8.208-7.189 4.358-.116 7.933 3.496 8.128 7.189h-16.336zM181.484 25.844l-5.103-15.512h-2.397l-5.066 15.512-5.812-17.395h-3.064l7.345 21.125h2.828l4.909-15.393 4.985 15.393h2.867l7.304-21.125h-3.024zM193.479 8.449h2.907v21.125h-2.907zM193.479.516h2.907V4.56h-2.907zM220.264 8.253v4.477c-.94-2.2-4.005-4.87-8.638-4.87-6.325 0-10.88 4.83-10.88 11.113 0 5.929 4.166 11.189 10.92 11.189 4.396 0 7.228-2.159 8.715-4.943v4.355h2.79V.516h-2.907v7.737zm-2.157 16.73c-1.495 1.529-3.654 2.475-6.008 2.475-5.499 0-8.446-4.204-8.483-8.444v-.04c0-4.752 3.572-8.443 8.441-8.443 2.358 0 4.476.904 5.964 2.435 1.537 1.49 2.437 3.533 2.437 5.931a8.294 8.294 0 0 1-2.351 6.086zM246.156 10.844c-1.998-1.924-4.748-2.984-7.732-2.984-6.326 0-11.117 4.987-11.117 11.189 0 5.265 3.811 11.113 11.158 11.113 2.156 0 4.238-.588 6.009-1.728 1.804-1.14 3.295-2.861 4.276-5.142h-3.023c-1.374 2.747-4.008 4.36-7.262 4.36-3.578.038-8.096-2.512-8.251-7.816h19.243c.316-3.378-.866-6.635-3.301-8.992zm-15.903 6.678c.277-3.85 3.653-7.189 8.211-7.189 4.354-.116 7.93 3.496 8.127 7.189h-16.338z"
          ></path>
          <path
            d="M104.867 43.614c-3.215-2.648-7.314-4.34-18.322-4.34H67.096v59.468h15.186V80.097h5.95c9.239 0 13.255-1.687 17.356-5.144 3.78-3.213 6.27-9.56 6.27-15.591 0-6.026-2.329-11.89-6.991-15.748zM93.696 65.873c-2.009.886-4.42.886-5.867.886h-5.547V52.615h4.983c1.688 0 4.182 0 6.271.882 2.087.885 3.774 2.571 3.774 6.107.001 3.54-1.606 5.386-3.614 6.269zM147.002 38.152c-16.396 0-31.34 12.05-31.34 31.498v.081c0 15.271 12.534 30.135 31.257 30.135 18.485 0 31.501-14.303 31.501-30.856.001-16.558-13.097-30.858-31.418-30.858zm.241 48.378c-10.208 0-16.391-8.521-16.391-17.602v-.079c0-8.359 5.706-17.361 16.232-17.361 10.928 0 16.151 9.883 16.151 17.6 0 7.638-5.223 17.442-15.992 17.442zM206.584 80.983l-12.055-41.709H178.94l19.848 59.467h15.674l19.924-59.467h-15.669zM241.091 98.741h33.672V85.404h-18.482V75.195h17.916V61.86h-17.916v-9.245h18.482V39.274h-33.672zM325.656 70.537c1.688-2.654 2.975-6.192 2.975-10.772 0-6.504-2.248-12.373-7.232-16.228-3.294-2.572-9.084-4.264-18.403-4.264h-19.448v59.468h15.188V52.615h5.624c2.092 0 4.5.563 6.19 1.606 2.008 1.286 3.536 3.777 3.536 6.914 0 3.294-1.528 6.103-3.377 7.309-2.008 1.287-5.302 1.611-9.162 1.611h-2.492l15.514 28.687h15.664L317.94 76.884c2.815-1.204 5.706-3.211 7.716-6.347zM331.473 52.615h11.728v46.126h15.189V52.615h11.654V39.274h-38.571zM405.748 39.274l-8.928 23.87-8.836-23.87h-16.473l17.757 37.852v21.615h15.189V77.126l17.601-37.852z"
          ></path>
          <path
            d="M287.689 212.416l-13.837-19.703h-2.677v23.591h2.551l-.064-19.858 14 19.858h2.546v-23.591h-2.546zM294.94 216.304h13.067v-2.328h-10.455v-8.412h10.397v-2.333h-10.397v-8.19h10.455v-2.328H294.94zM310.06 195.041h5.799v21.263h2.648v-21.263h5.836v-2.328H310.06zM345.453 212.702l-5.261-19.989h-1.976l-5.159 19.989-5.36-19.989h-2.713l6.539 23.591h2.648l5.034-19.155 5.038 19.155h2.583l6.597-23.591h-2.673zM367.023 192.293c-6.664 0-12.31 5.008-12.31 12.281v.032c0 6.722 5.327 12.112 12.31 12.112 6.947 0 12.308-5.289 12.308-12.213 0-6.915-5.391-12.212-12.308-12.212zm.034 22.101c-5.524 0-9.696-4.337-9.696-9.888v-.03c0-5.45 4.112-9.853 9.662-9.853 5.609 0 9.688 4.498 9.688 9.883-.001 5.39-4.079 9.888-9.654 9.888zM397.355 204.894c.988-1.342 1.434-3.03 1.4-4.626 0-2.678-1.305-5.199-3.217-6.347-1.211-.763-2.935-1.208-6.629-1.208h-6.158v23.591h2.646v-21.263h3.701c2.135 0 3.604.096 4.783.856 1.461.958 2.322 2.808 2.322 4.557 0 1.699-.541 3.128-1.781 4.339-1.277 1.183-3.571 1.213-5.229 1.213h-.763l6.659 10.298h2.869l-5.865-8.833c2.17-.225 3.86-.667 5.262-2.577zM407.406 204.476l9.881-11.763h-2.866l-9.593 11.41v-11.41h-2.616v23.591h2.616v-11.189l10.17 11.189h3.279z"
          ></path>
          <path
            d="M268.505 116.436h9.695v60.863h-9.695zM320.341 115.286c-17.111 0-31.834 12.746-31.834 31.91v.077c0 16.78 13.406 31.172 31.748 31.172 18.256 0 31.988-14.062 31.988-31.579s-13.732-31.58-31.902-31.58zm.157 54.613c-12.992 0-22.367-10.365-22.367-23.032v-.088c0-12.256 9.05-22.941 22.285-22.941 13.328 0 22.129 11.186 22.129 23.111-.001 11.848-8.801 22.95-22.047 22.95zM401.085 116.436l.17 46.302-31.58-46.302h-9.126v60.863h9.372l-.164-46.389 31.821 46.389h8.886v-60.863z"
          ></path>
        </g>
        <path
          fill="#231F20"
          class="wa-state"
          d="M259.675 237.807V107.323s-184.76 1.046-193.114 1.046c-8.349 0 16.424 45.432 16.424 53.434 0 8.005-2.978 23.33-6.806 23.33s-5.094-12.74-5.094-21.091c0-8.354-24.358-11.486-33.404-11.486-9.048 0-32.359-12.522-36.188-13.914-3.827-1.389.699 21.574 2.435 26.792 1.741 5.217 8.35 4.521 8.35 10.783 0 6.269 11.833 68.896 11.833 68.896 50.452 0 42.101 34.102 50.802 34.102 8.7 0 21.224-6.265 26.443-6.265s17.049 3.825 21.573 3.825c4.525 0 14.963-6.259 17.745-6.259 2.786 0 4.871 1.737 9.048 1.391 4.177-.346 19.136-8.703 25.404-9.741 6.26-1.047 21.224-4.178 21.224-4.178s62.632-.347 65.763-.347c3.134-.001-2.438-12.998-2.438-19.834zm-122.138-61.136l-5.739-14.351h-25.902l-5.577 14.351H89.828l24.92-60.659h8.773l24.505 60.659h-10.489zm42.707-7.383c11.721 0 17.375-8.851 18.688-11.069h10.161c-3.768 11.069-14.996 19.593-28.769 19.593-18.275 0-31.719-14.346-31.719-31.559 0-16.636 12.867-31.392 31.639-31.392 16.313.08 25.982 11.556 28.94 19.917h-10.252c-1.963-3.942-8.116-11.31-18.768-11.396-12.867 0-21.891 10.578-21.891 22.87 0 12.62 9.185 23.036 21.971 23.036zm72.054-44.756h-13.934v52.139h-9.677v-52.139h-13.935v-8.521h37.545v8.521z M108.52 154.539h20.654l-10.41-27.298z"
        ></path>
        <defs>
          <filter id="sofGlow" height="300%" width="300%" x="-75%" y="-75%">
            <!-- Thicken out the original shape -->
            <feMorphology
              operator="dilate"
              radius="4"
              in="SourceAlpha"
              result="thicken"
            ></feMorphology>
            <!-- Use a gaussian blur to create the soft blurriness of the glow -->
            <feGaussianBlur
              in="thicken"
              stdDeviation="10"
              result="blurred"
            ></feGaussianBlur>
            <!-- Change the colour -->
            <feFlood flood-color="#ff6b10" result="glowColor"></feFlood>
            <!-- Color in the glows -->
            <feComposite
              in="glowColor"
              in2="blurred"
              operator="in"
              result="softGlow_colored"
            ></feComposite>
            <!--	Layer the effects together -->
            <feMerge>
              <feMergeNode in="softGlow_colored"></feMergeNode>
              <feMergeNode in="SourceGraphic"></feMergeNode>
            </feMerge>
          </filter>
        </defs>
      </svg>
    </a>
  </div>
</template>

<script>
import { setInterval, clearInterval } from "timers";

export default {
  name: "TheLogo",
  props: {},
  data: function() {
    return {
      glowPulseInterval: "", // The interval of the logo glowing effect
      forceLogoGlow: false // Whether or not the logo must glow
    };
  },
  mounted: function() {
    // Set a interval to which the logo with glow
    this.glowPulseInterval = setInterval(
      function() {
        this.forceLogoGlow = !this.forceLogoGlow;

        // If app is done loading, stop the animation
        if (!this.$store.getters.appLoading) {
          clearInterval(this.glowPulseInterval);
          this.resetLogo();
        }
      }.bind(this),
      1500
    );
  },
  methods: {
    /**
     * Resets the logo state.
     */
    resetLogo() {
      this.forceLogoGlow = false;
    }
  }
};
</script>

<style lang="scss">
.logo,
.logo--glow {
  position: relative;
  top: 50%;
  transform: translateY(-50%);
  height: 50px;
  left: 14px; // Aligns with legends

  transition: opacity 250ms ease-in;
}

.logo:hover .wa-state,
.logo--glow .wa-state {
  filter: url("#sofGlow");
}

.logo:hover .wa-state {
  transition: filter 250ms ease-in;
}

.logo--glow .wa-state {
  transition: filter 1500ms;
}

.logo:hover .outside-text,
.logo--glow .outside-text {
  opacity: 0.65;
}

.outside-text,
.wa-state {
  fill: #572d85;

  transition: 250ms ease-out;
}
</style>
